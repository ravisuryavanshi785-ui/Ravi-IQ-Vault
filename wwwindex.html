<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>Ravi's Logic Vault - IQ Test</title>
    <style>
        :root {
            --primary: #2c3e50;
            --green: #2ecc71;
            --red: #e74c3c;
            --bg: #f8f9fa;
            --card-bg: white;
            --card-color: #34495e;
        }

        * { box-sizing: border-box; }
        body {
            font-family: 'Segoe UI', sans-serif;
            background: var(--bg);
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            margin: 0;
            padding: 20px;
        }

        #app-card {
            background: var(--card-bg);
            color: var(--card-color);
            width: 100%;
            max-width: 640px;
            padding: 26px;
            border-radius: 20px;
            box-shadow: 0 15px 35px rgba(0,0,0,0.12);
            transition: 0.35s ease;
            position: relative;
            overflow: hidden;
        }

        /* Premium state styles */
        #app-card.premium {
            color: #ffffff;
            box-shadow: 0 20px 45px rgba(0,0,0,0.28);
        }
        /* subtle overlay to improve contrast on images/gradients */
        #app-card .overlay {
            position: absolute;
            inset: 0;
            pointer-events: none;
            background: linear-gradient(to bottom, rgba(0,0,0,0.12), rgba(0,0,0,0.18));
            mix-blend-mode: multiply;
            opacity: 0.6;
        }

        .header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 18px;
            border-bottom: 2px solid rgba(255,255,255,0.08);
            padding-bottom: 14px;
            gap: 10px;
        }

        .header .left { display:flex; gap:12px; align-items:center; font-weight:600; }
        .qid { font-size: 0.95rem; color: inherit; }
        .timer { font-weight:700; color: inherit; display:flex; gap:8px; align-items:center; }

        .iq-badge {
            background: var(--primary);
            color: white;
            padding: 8px 15px;
            border-radius: 50px;
            font-weight: bold;
            min-width: 88px;
            text-align: center;
        }
        #app-card.premium .iq-badge {
            background: rgba(255,255,255,0.18);
            color: #fff;
            border: 1px solid rgba(255,255,255,0.12);
        }

        .question-text {
            font-size: 1.15rem;
            color: inherit;
            font-weight: 700;
            margin: 14px 0 18px 0;
            line-height: 1.35;
        }

        #options { margin-bottom: 10px; display: grid; grid-template-columns: 1fr; gap: 10px; }

        .option {
            display: block;
            width: 100%;
            padding: 12px 14px;
            margin: 0;
            border: 2px solid rgba(0,0,0,0.08);
            border-radius: 12px;
            cursor: pointer;
            transition: 0.15s;
            background: rgba(255,255,255,0.98);
            text-align: left;
            font-weight: 600;
            color: var(--primary);
        }

        #app-card.premium .option {
            background: rgba(255,255,255,0.06);
            color: #fff;
            border: 1px solid rgba(255,255,255,0.12);
        }

        .option:disabled { opacity: 0.9; cursor: default; transform: none; }

        .option:hover:not(:disabled) { transform: translateY(-2px); }

        .correct { background: var(--green) !important; color: white !important; border-color: #27ae60 !important; }
        .wrong { background: var(--red) !important; color: white !important; border-color: #c0392b !important; }

        #explanation {
            display: none;
            margin-top: 12px;
            padding: 14px;
            background: rgba(232,244,253,0.9);
            border-radius: 10px;
            color: #2980b9;
            font-size: 0.95rem;
        }

        #app-card.premium #explanation {
            background: rgba(255,255,255,0.08);
            color: #fff;
            border: 1px solid rgba(255,255,255,0.06);
        }

        #next-btn {
            display: none;
            margin-top: 16px;
            width: 100%;
            padding: 12px;
            background: var(--primary);
            color: white;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            font-weight: bold;
            font-size: 1rem;
        }

        #next-btn:disabled { opacity: 0.6; cursor: default; }

        /* Timer bar */
        .timer-wrap { margin-top: 6px; height: 10px; background: rgba(0,0,0,0.06); border-radius: 8px; overflow: hidden; }
        #time-bar { height: 100%; width: 100%; background: linear-gradient(90deg,#27ae60,#f1c40f); transition: width 0.2s linear; }

        /* small premium badge */
        .premium-badge {
            font-size: 12px;
            padding: 6px 10px;
            border-radius: 999px;
            background: gold;
            color: #2c3e50;
            font-weight: 700;
            display: inline-block;
        }

        /* responsive */
        @media (max-width: 520px) {
            #app-card { padding: 18px; border-radius: 14px; }
            .question-text { font-size: 1.05rem; }
        }
    </style>
</head>
<body>
<div id="app-card">
    <div class="overlay" style="display:none;"></div>

    <div class="header">
        <div class="left">
            <div class="qid">Riddle: <span id="count">1</span>/<span id="total">50</span></div>
            <div class="timer" title="Time left">
                <div style="font-size:0.9rem">Time:</div>
                <div id="time-display">60s</div>
            </div>
        </div>

        <div style="display:flex; gap:10px; align-items:center;">
            <div class="premium-badge" id="premium-indicator" style="display:none;">PREMIUM</div>
            <div class="iq-badge">IQ: <span id="score">0</span></div>
        </div>
    </div>

    <div id="game">
        <div class="question-text" id="q-text">Loading...</div>

        <div id="options"></div>

        <div class="timer-wrap" aria-hidden="true" style="margin-bottom:12px;">
            <div id="time-bar" style="width:100%"></div>
        </div>

        <div id="explanation"></div>
        <button id="next-btn" onclick="next()">Next Challenge →</button>
    </div>
</div>

<script>
    // Expanded question set to 50 (3 original + 47 added).
    // Each item: { q: "question", o: ["opt1","opt2","opt3","opt4"], a: indexOfCorrect, e: "explanation", bg: "optional CSS background" }
    const data = [
        { q: "Wo kya hai jo aati hai par kabhi pahunchti nahi?", o: ["Train", "Tomorrow (Kal)", "Chitthi", "Khushi"], a: 1, e: "Logic: Kal kabhi nahi aata, kyunki jab wo aata hai toh wo 'Aaj' ban jata hai.", bg: "linear-gradient(135deg,#667eea 0%, #764ba2 100%)" },
        { q: "Ek andhere kamre mein mombatti, lalten aur chulha hai. Aapke paas 1 machis hai. Pehle kya jalaoge?", o: ["Mombatti", "Lalten", "Chulha", "Machis"], a: 3, e: "Logic: Bina machis jalaye baaki kuch nahi jalaya ja sakta!", bg: "" },
        { q: "A, B ka baap hai par B uska beta nahi hai. Kaise?", o: ["B uski beti hai", "Bhatija hai", "Adopted hai", "Sawal galat hai"], a: 0, e: "Logic: Simple hai, agar beta nahi hai toh beti hogi!", bg: "linear-gradient(135deg,#f6d365 0%, #fda085 100%)" },

        { q: "I speak without a mouth and hear without ears. I have nobody, but I come alive with wind. What am I?", o: ["Echo", "Shadow", "Fire", "Clock"], a: 0, e: "An echo is a reflected sound that 'speaks' back without a mouth.", bg: "" },
        { q: "You see a boat filled with people. It has not sunk, but when you look again you don't see a single person on the boat. Why?", o: ["They are all married", "They hid below deck", "They jumped out", "It's foggy"], a: 0, e: "They were all married — so there wasn't a 'single' person on board.", bg: "linear-gradient(135deg,#11998e 0%, #38ef7d 100%)" },
        { q: "I have cities but no houses, forests but no trees, and water but no fish. What am I?", o: ["Map", "Dream", "Painting", "Globe"], a: 0, e: "A map shows cities/forests/water but not the real things.", bg: "" },
        { q: "What disappears as soon as you say its name?", o: ["Silence", "Mirror", "Secret", "Sleep"], a: 0, e: "Saying 'silence' breaks the silence.", bg: "" },
        { q: "The more of this there is, the less you see. What is it?", o: ["Darkness", "Light", "Fog", "Noise"], a: 0, e: "As darkness increases, visibility decreases.", bg: "" },
        { q: "Forward I am heavy, backward I am not. What am I?", o: ["Ton", "Rock", "Lead", "Stone"], a: 0, e: "'Ton' backwards is 'not'.", bg: "" },
        { q: "What can travel around the world while staying in a corner?", o: ["A stamp", "A satellite", "A shadow", "A rumor"], a: 0, e: "A stamp stays on the corner of an envelope but can travel worldwide.", bg: "linear-gradient(135deg,#ee9ca7 0%, #ffdde1 100%)" },

        { q: "What has a head, a tail, is brown, and has no legs?", o: ["A penny", "A snake", "A coin-operated machine", "A stick"], a: 0, e: "A penny (or coin) has a head and tail faces but no legs.", bg: "" },
        { q: "What runs all around a backyard, yet never moves?", o: ["A fence", "A dog", "A path", "A shadow"], a: 0, e: "A fence encloses the yard without moving.", bg: "" },
        { q: "What gets wetter the more it dries?", o: ["A towel", "A sponge", "Rain", "A cloth"], a: 0, e: "A towel dries you while becoming wetter.", bg: "" },
        { q: "I am not alive, but I grow; I don't have lungs, but I need air; I don't have a mouth, but water kills me. What am I?", o: ["Fire", "Crystal", "Rust", "Mold"], a: 0, e: "Fire grows with oxygen but is extinguished by water.", bg: "linear-gradient(135deg,#f093fb 0%, #f5576c 100%)" },
        { q: "What has four wheels and flies?", o: ["A garbage truck", "An airplane", "A car", "A bicycle"], a: 0, e: "A garbage truck has wheels and 'flies' (insects) around it.", bg: "" },

        { q: "What goes up but never comes down?", o: ["Your age", "Smoke", "Sun", "Temperature"], a: 0, e: "Age only increases.", bg: "" },
        { q: "I have keys but no locks, space but no room, you can enter but not go outside. What am I?", o: ["Keyboard", "Piano", "Map", "Door"], a: 0, e: "A keyboard has keys and a space bar, and an 'enter' key.", bg: "" },
        { q: "The person who makes it, sells it. The person who buys it never uses it. The person who uses it never sees it. What is it?", o: ["A coffin", "A bed", "A mirror", "Perfume"], a: 0, e: "Coffin makers sell it; the buyer doesn't use it; the user can't see it.", bg: "linear-gradient(135deg,#a18cd1 0%, #fbc2eb 100%)" },
        { q: "What begins with T, ends with T, and has T in it?", o: ["Teapot", "Tent", "Trait", "Ticket"], a: 0, e: "Teapot begins and ends with 'T' and contains tea.", bg: "" },
        { q: "A man pushed his car to a hotel and lost his fortune. Why?", o: ["Playing Monopoly", "Car accident", "Robbery", "Bank failure"], a: 0, e: "He landed on 'hotel' while playing Monopoly and lost money.", bg: "" },

        { q: "You measure my life in hours and I serve you by expiring. I'm quick when I'm thin and slow when I'm fat. The wind is my enemy.", o: ["A candle", "A clock", "An hourglass", "A shadow"], a: 0, e: "A candle burns down; thin candles burn faster.", bg: "" },
        { q: "What can be broken but never held?", o: ["A promise", "A glass", "An egg", "A heart"], a: 0, e: "A promise can be broken but not physically held.", bg: "" },
        { q: "What invention lets you look right through a wall?", o: ["A window", "A mirror", "A keyhole", "X-ray"], a: 0, e: "A window allows you to see through a wall.", bg: "" },
        { q: "What English word has three consecutive double letters?", o: ["Bookkeeper", "Mississippi", "Committee", "Balloon"], a: 0, e: "'Bookkeeper' has 'oo', 'kk', 'ee' in a row.", bg: "linear-gradient(135deg,#ff9a9e 0%, #fecfef 100%)" },
        { q: "What has many teeth, but cannot bite?", o: ["A comb", "A saw", "A zipper", "A gear"], a: 0, e: "A comb has many teeth but doesn't bite.", bg: "" },

        { q: "I fly without wings, I cry without eyes. Whenever I go, darkness flees. What am I?", o: ["A cloud", "Wind", "A bat", "Smoke"], a: 0, e: "Clouds 'cry' rain and move, often letting sunlight return.", bg: "" },
        { q: "If you have me, you want to share me. If you share me, you no longer have me. What am I?", o: ["A secret", "Wealth", "Happiness", "A gift"], a: 0, e: "Sharing a secret means it's no longer only yours.", bg: "" },
        { q: "Two in a corner, one in a room, zero in a house, but one in a shelter. What is it?", o: ["The letter 'r'", "A window", "A door", "An attic"], a: 0, e: "'Corner' has two 'r's, 'room' one, 'house' none, 'shelter' one.", bg: "" },
        { q: "What goes through cities and fields, but never moves?", o: ["A road", "A river", "A train", "A tunnel"], a: 0, e: "Roads run through places but do not move.", bg: "" },
        { q: "What has one eye but cannot see?", o: ["A needle", "A storm", "A potato", "A hurricane"], a: 0, e: "A needle has an 'eye' for thread but cannot see.", bg: "linear-gradient(135deg,#56ab2f 0%, #a8e063 100%)" },

        { q: "I am taken from a mine, and shut up in a wooden case, from which I am never released, and yet I am used by almost everybody. What am I?", o: ["Pencil lead (graphite)", "Coal", "Gold", "Salt"], a: 0, e: "Graphite (pencil lead) is mined and encased in wood for use.", bg: "" },
        { q: "I am a word of letters three; add two and fewer there will be. What am I?", o: ["Few", "Less", "Many", "Tiny"], a: 0, e: "Adding 'er' to 'few' makes 'fewer'.", bg: "" },
        { q: "I can be cracked, I can be made, I can be told, I can be played. What am I?", o: ["A joke", "A code", "A promise", "A game"], a: 0, e: "Jokes can be cracked, made, told, and played.", bg: "" },
        { q: "What can fill a room but takes up no space?", o: ["Light", "Air", "Sound", "Heat"], a: 0, e: "Light fills a room yet has no volume in the physical sense.", bg: "" },
        { q: "People make me, save me, change me, raise me. What am I?", o: ["Money", "Mistakes", "Time", "Noise"], a: 0, e: "You can make, save, change, or raise money.", bg: "" },

        { q: "The more you take, the more you leave behind. What are they?", o: ["Footsteps", "Money", "Time", "Breaths"], a: 0, e: "By walking you take steps and leave footsteps behind.", bg: "" },
        { q: "I am always hungry and will die if not fed, but if you drink me, I will die. What am I?", o: ["Fire", "Plant", "Animal", "Rust"], a: 0, e: "Fire needs fuel to keep burning and is extinguished by water.", bg: "linear-gradient(135deg,#fbc2eb 0%, #a6c1ee 100%)" },
        { q: "What runs, but never walks; has a mouth, but never talks; has a head, but never weeps; has a bed, but never sleeps?", o: ["A river", "A train", "A clock", "A camel"], a: 0, e: "A river runs, has a mouth and a bed, but cannot do the human actions.", bg: "" },
        { q: "I have branches, but no fruit, trunk or leaves. What am I?", o: ["A bank", "A tree", "A river", "A store"], a: 0, e: "A bank has branches but not botanical ones.", bg: "" },
        { q: "I can be long or short; I can be grown or bought; I can be painted or left bare; what am I?", o: ["A nail", "Hair", "A road", "A sleeve"], a: 0, e: "Fingernails can be long/short, grown/bought (fake), painted or left bare.", bg: "" },

        { q: "I have a heart that doesn't beat. What am I?", o: ["An artichoke", "A stone", "A table", "A clock"], a: 0, e: "An artichoke has a 'heart' (the edible center) that doesn't beat.", bg: "" },
        { q: "What English word is pronounced the same even after you take away four of its five letters?", o: ["Queue", "Knife", "Hour", "Colonel"], a: 0, e: "'Queue' pronounced 'Q' even after removing four letters.", bg: "linear-gradient(135deg,#fddb92 0%, #d1fdff 100%)" },
        { q: "I am a box that holds keys without locks, yet they can unlock your soul. What am I?", o: ["A piano", "A keyboard", "A map", "A diary"], a: 0, e: "A piano (or keyboard) holds musical keys that can move you emotionally.", bg: "" },
        { q: "A cowboy rode into town on Friday. He stayed in town for three days and rode out on Friday. How is that possible?", o: ["His horse's name was Friday", "He traveled back in time", "He lied", "It was a different Friday"], a: 0, e: "The horse's name was Friday.", bg: "" },
        { q: "I'm light as a feather, yet the strongest man can't hold me for much more than a minute. What am I?", o: ["Breath", "Water", "Fire", "Air"], a: 0, e: "You can hold your breath for a short time only.", bg: "" },

        { q: "What goes up and down stairs without moving?", o: ["A carpet", "A person", "A shadow", "An escalator"], a: 0, e: "A carpet laid on stairs doesn't move yet goes up and down the stairs' surface.", bg: "" },
        { q: "Two fathers and two sons sat down to eat eggs for breakfast. They ate three eggs, each person had one. How is this possible?", o: ["Grandfather, father, and son", "They shared", "One was imaginary", "It was three sons"], a: 0, e: "They were grandfather, father, and son — two fathers and two sons but three people.", bg: "" },
        { q: "What occurs once in a minute, twice in a moment, but never in a thousand years?", o: ["The letter 'M'", "A second", "An hour", "A blink"], a: 0, e: "The letter 'M' appears once in 'minute' and twice in 'moment'.", bg: "" },
        { q: "What has 88 keys but can't open a single lock?", o: ["Piano", "Typewriter", "Computer keyboard", "Organ"], a: 0, e: "A piano has 88 keys but none are for locks.", bg: "linear-gradient(135deg,#43e97b 0%, #38f9d7 100%)" },
        { q: "I have no doors, no windows, and I'm big. My forest feels no breeze. What am I?", o: ["A mushroom (giant)", "A cave", "A desert", "An island"], a: 1, e: "A cave has no doors/windows and inside there is often still air (no breeze).", bg: "" },

        { q: "I build up castles; I tear down mountains. I make some men blind; I help others to see. What am I?", o: ["Sand", "Wind", "Time", "Water"], a: 0, e: "Sand builds sandcastles, erodes mountains, forms glass (helps see), and in eyes can blind.", bg: "" },
        { q: "What can you keep after giving to someone?", o: ["Your word", "Money", "A gift", "A secret"], a: 0, e: "If you give someone your word (a promise), you still 'keep' it in the sense of integrity.", bg: "" },
        { q: "I turn once, what is out will not get in. I turn again, what is in will not get out. What am I?", o: ["A key", "A faucet", "A wheel", "A clock"], a: 0, e: "Turning a key locks or unlocks so what's out cannot get in, and vice versa.", bg: "" },
        { q: "The more there is, the less you see. What is it?", o: ["Fog", "Light", "Sound", "Space"], a: 0, e: "More fog reduces visibility.", bg: "" },
        { q: "I am not alive but I grow; I don't have lungs yet I need air; what am I?", o: ["Rust", "Fire", "Ice", "Shadow"], a: 1, e: "Fire needs oxygen to grow, but it isn't alive.", bg: "linear-gradient(135deg,#667eea 0%, #764ba2 100%)" },

        { q: "I am the beginning of the end, and the end of time and space. I am essential to creation, and I surround every place. What am I?", o: ["The letter 'E'", "Nothing", "Space", "Energy"], a: 0, e: "'E' begins 'End', ends 'timE' and 'spacE', in 'crEation' and surrounds 'placE'.", bg: "" },
        { q: "You see me once in June, twice in November, and not at all in May. What am I?", o: ["The letter 'E'", "The letter 'N'", "The letter 'J'", "The moon"], a: 0, e: "June has one 'E', November two, May none.", bg: "" },
        { q: "A man was found murdered on a Sunday morning. His wife said she was sleeping, the cook said he was cooking breakfast, the gardener said he was planting seeds, the maid said she was getting the mail, and the butler said he was polishing the silver. Who did it?", o: ["The maid", "The cook", "The butler", "The gardener"], a: 0, e: "Mail isn't delivered on Sunday in many places; maid's alibi is suspicious.", bg: "" },
        { q: "What gets sharper the more you use it?", o: ["Your brain", "A knife", "A pencil", "A saw"], a: 0, e: "Using your brain makes it 'sharper' (figuratively).", bg: "" }
    ];

    const DEFAULT_TIME = 60; // seconds per question
    let idx = 0, iq = 0;
    let secondsLeft = DEFAULT_TIME;
    let timerId = null;
    let buttons = []; // keep references to option buttons

    const appCard = document.getElementById('app-card');
    const overlay = appCard.querySelector('.overlay');
    document.getElementById('total').innerText = data.length;

    function startTimer() {
        clearInterval(timerId);
        secondsLeft = DEFAULT_TIME;
        updateTimerUI();

        timerId = setInterval(() => {
            secondsLeft--;
            if (secondsLeft <= 0) {
                clearInterval(timerId);
                timeUp();
            }
            updateTimerUI();
        }, 1000);
    }

    function updateTimerUI() {
        const display = document.getElementById('time-display');
        const bar = document.getElementById('time-bar');
        display.innerText = secondsLeft + 's';
        const pct = Math.max(0, (secondsLeft / DEFAULT_TIME) * 100);
        bar.style.width = pct + '%';

        // change color of bar as time decreases
        if (pct > 60) bar.style.background = 'linear-gradient(90deg,#27ae60,#f1c40f)';
        else if (pct > 30) bar.style.background = 'linear-gradient(90deg,#f1c40f,#e67e22)';
        else bar.style.background = 'linear-gradient(90deg,#e74c3c,#c0392b)';
    }

    function load() {
        clearInterval(timerId);
        buttons = [];

        const r = data[idx];
        document.getElementById('q-text').innerText = r.q;
        document.getElementById('count').innerText = idx + 1;
        document.getElementById('explanation').style.display = "none";
        document.getElementById('explanation').innerText = "";
        const container = document.getElementById('options');
        container.innerHTML = "";

        // handle premium backgrounds per question
        if (r.bg && r.bg.trim() !== "") {
            appCard.classList.add('premium');
            overlay.style.display = 'block';
            appCard.style.background = r.bg;
            document.getElementById('premium-indicator').style.display = 'inline-block';
        } else {
            appCard.classList.remove('premium');
            overlay.style.display = 'none';
            appCard.style.background = 'white';
            document.getElementById('premium-indicator').style.display = 'none';
        }

        r.o.forEach((opt, i) => {
            const btn = document.createElement('button');
            btn.className = "option";
            btn.innerText = opt;
            btn.type = "button";
            btn.disabled = false;
            btn.onclick = () => choose(i);
            container.appendChild(btn);
            buttons.push(btn);
        });

        document.getElementById('next-btn').style.display = "none";
        document.getElementById('next-btn').disabled = false;

        // start timer for this question
        startTimer();
    }

    function choose(i) {
        clearInterval(timerId);
        const r = data[idx];
        // disable all buttons
        buttons.forEach(b => b.disabled = true);

        if (i === r.a) {
            buttons[i].classList.add('correct');
            iq += 2;
        } else {
            buttons[i].classList.add('wrong');
            // highlight correct option
            if (buttons[r.a]) buttons[r.a].classList.add('correct');
            iq -= 2;
        }
        document.getElementById('score').innerText = iq;
        document.getElementById('explanation').innerText = r.e || "";
        document.getElementById('explanation').style.display = "block";
        document.getElementById('next-btn').style.display = "block";
    }

    function timeUp() {
        // time out: treat as wrong answer
        const r = data[idx];
        buttons.forEach(b => b.disabled = true);
        // highlight correct option
        if (buttons[r.a]) buttons[r.a].classList.add('correct');
        // show explanation and deduct points
        iq -= 2;
        document.getElementById('score').innerText = iq;
        document.getElementById('explanation').innerText = "Time's up! " + (r.e || "");
        document.getElementById('explanation').style.display = "block";
        document.getElementById('next-btn').style.display = "block";
    }

    function next() {
        clearInterval(timerId);
        idx++;
        if (idx < data.length) {
            load();
        } else {
            // question set finished
            const finalMsg = document.createElement('div');
            finalMsg.style.position = 'fixed';
            finalMsg.style.inset = 0;
            finalMsg.style.display = 'flex';
            finalMsg.style.alignItems = 'center';
            finalMsg.style.justifyContent = 'center';
            finalMsg.style.background = 'rgba(0,0,0,0.6)';
            finalMsg.style.zIndex = 9999;
            finalMsg.innerHTML = `
                <div style="background:#fff;color:#222;padding:26px;border-radius:12px;max-width:520px;text-align:center;">
                    <h2 style="margin:0 0 8px 0;">Final IQ Score: ${iq}</h2>
                    <p style="margin:0 0 16px 0;">Great job! You can review explanations or retake the test.</p>
                    <div style="display:flex;gap:10px;justify-content:center;margin-top:12px;">
                        <button id="retake" style="padding:10px 14px;border-radius:8px;border:none;background:#2c3e50;color:#fff;cursor:pointer;font-weight:700;">Retake</button>
                        <button id="close" style="padding:10px 14px;border-radius:8px;border:1px solid #ccc;background:#fff;color:#333;cursor:pointer;">Close</button>
                    </div>
                </div>
            `;
            document.body.appendChild(finalMsg);
            document.getElementById('retake').onclick = () => {
                document.body.removeChild(finalMsg);
                idx = 0; iq = 0; document.getElementById('score').innerText = iq; load();
            };
            document.getElementById('close').onclick = () => {
                document.body.removeChild(finalMsg);
            };
        }
    }

    // initialize
    load();
</script>
</body>
</html>